"use strict";

/**
 * This module sets up the application routes and connects them to their
 * handlers and views. It is imported into server.js
 * @module app-routes
 * @see module:timestamp
 * @see module:header-parser
 * @see module:file-analyzer
 * @see module:url-shortener
 * @see module:image-abstract
 * @param {object} activeApp - ExpressJS object instance
 * @param {object} expressModule - ExpressJS module
 * @param {object} mongoDatabase - MongoDB database
 */
var setupRoutes = function setupRoutes(activeApp, expressModule, mongoDatabase) {
  var path = require('path'); // Prodution and development specific settings


  var appEnv = activeApp.get('env');
  var curDir = process.cwd();
  var tgtPath = null;

  if (appEnv === 'production') {
    tgtPath = curDir + '/dist';
    activeApp.set('views', './dist/views');
  } else {
    tgtPath = curDir + '/src';
    activeApp.set('views', './src/views');
  }

  activeApp.set('view engine', 'pug');
  activeApp.use(expressModule.static(path.resolve(__dirname, 'views')));
  activeApp.use('/static', expressModule.static(path.resolve(__dirname, 'views/static_files')));
  var rTimestamp = expressModule.Router();

  var cbTimestamp = require(tgtPath + '/controllers/timestamp');

  rTimestamp.get('/timestamp/api/v1/:data', cbTimestamp);
  var rHeaderParser = expressModule.Router();

  var cbHeaderParser = require(tgtPath + '/controllers/header-parser');

  rHeaderParser.get('/header-parser/api/v1/whoami', cbHeaderParser);
  var rFileAnalyzer = expressModule.Router();

  var cbFileAnalyzer = require(tgtPath + '/controllers/file-analyzer');

  rFileAnalyzer.post('/file-analyzer/api/v1/findsize', cbFileAnalyzer.postData);
  var rUrlShortener = expressModule.Router();

  var cbUrlShortener = require(tgtPath + '/controllers/url-shortener');

  cbUrlShortener.readCollection(mongoDatabase);
  rUrlShortener.get('/url-shortener/api/v1/new/*', cbUrlShortener.processUrl);
  rUrlShortener.get('/url-shortener/:data', cbUrlShortener.accessLink);
  var rImageAbstract = expressModule.Router();

  var cbImageAbstract = require(tgtPath + '/controllers/image-abstract');

  cbImageAbstract.readCollection(mongoDatabase);
  rImageAbstract.get('/image-abstract/api/v1/entry/*', cbImageAbstract.getSearchResults);
  rImageAbstract.get('/image-abstract/api/v1/history', cbImageAbstract.getRecentHistory);
  activeApp.use(rTimestamp, rHeaderParser, rFileAnalyzer, rUrlShortener, rImageAbstract);
  activeApp.get('/', function (req, res) {
    res.render('index.pug', {
      content: 'landing',
      appEnv: appEnv
    });
  });
  activeApp.get('/timestamp/api/v1', function (req, res) {
    res.render('index.pug', {
      content: 'timestamp',
      appEnv: appEnv
    });
  });
  activeApp.get('/header-parser/api/v1', function (req, res) {
    res.render('index.pug', {
      content: 'header-parser',
      appEnv: appEnv
    });
  });
  activeApp.get('/file-analyzer', function (req, res) {
    res.render('index.pug', {
      content: 'file-analyzer',
      appEnv: appEnv
    });
  });
  activeApp.get('/url-shortener/api/v1', function (req, res) {
    res.render('index.pug', {
      content: 'url-shortener',
      appEnv: appEnv
    });
  });
  activeApp.get('/image-abstract/api/v1', function (req, res) {
    res.render('index.pug', {
      content: 'image-abstract',
      appEnv: appEnv
    });
  });
};

module.exports.setup = setupRoutes;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHAtcm91dGVzLmpzIl0sIm5hbWVzIjpbInNldHVwUm91dGVzIiwiYWN0aXZlQXBwIiwiZXhwcmVzc01vZHVsZSIsIm1vbmdvRGF0YWJhc2UiLCJwYXRoIiwicmVxdWlyZSIsImFwcEVudiIsImdldCIsImN1ckRpciIsInByb2Nlc3MiLCJjd2QiLCJ0Z3RQYXRoIiwic2V0IiwidXNlIiwic3RhdGljIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInJUaW1lc3RhbXAiLCJSb3V0ZXIiLCJjYlRpbWVzdGFtcCIsInJIZWFkZXJQYXJzZXIiLCJjYkhlYWRlclBhcnNlciIsInJGaWxlQW5hbHl6ZXIiLCJjYkZpbGVBbmFseXplciIsInBvc3QiLCJwb3N0RGF0YSIsInJVcmxTaG9ydGVuZXIiLCJjYlVybFNob3J0ZW5lciIsInJlYWRDb2xsZWN0aW9uIiwicHJvY2Vzc1VybCIsImFjY2Vzc0xpbmsiLCJySW1hZ2VBYnN0cmFjdCIsImNiSW1hZ2VBYnN0cmFjdCIsImdldFNlYXJjaFJlc3VsdHMiLCJnZXRSZWNlbnRIaXN0b3J5IiwicmVxIiwicmVzIiwicmVuZGVyIiwiY29udGVudCIsIm1vZHVsZSIsImV4cG9ydHMiLCJzZXR1cCJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU1BLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUNDLFNBQUQsRUFBWUMsYUFBWixFQUEyQkMsYUFBM0IsRUFBNkM7QUFDL0QsTUFBTUMsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFwQixDQUQrRCxDQUcvRDs7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHTCxTQUFTLENBQUNNLEdBQVYsQ0FBYyxLQUFkLENBQWY7QUFDQSxNQUFNQyxNQUFNLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixFQUFmO0FBQ0EsTUFBSUMsT0FBTyxHQUFHLElBQWQ7O0FBRUEsTUFBSUwsTUFB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SixDQUFXLFdBQVgsRUFBd0I7QUFBRUMsTUFBQUEsT0FBTyxFQUFFLGdCQUFYO0FBQTZCaEMsTUFBQUEsTUFBTSxFQUFFQTtBQUFyQyxLQUF4QjtBQUNELEdBRkQ7QUFHRCxDQXRFRDs7QUF3RUFpQyxNQUFNLENBQUNDLE9BQVAsQ0FBZUMsS0FBZixHQUF1QnpDLFdBQXZCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIG1vZHVsZSBzZXRzIHVwIHRoZSBhcHBsaWNhdGlvbiByb3V0ZXMgYW5kIGNvbm5lY3RzIHRoZW0gdG8gdGhlaXJcbiAqIGhhbmRsZXJzIGFuZCB2aWV3cy4gSXQgaXMgaW1wb3J0ZWQgaW50byBzZXJ2ZXIuanNcbiAqIEBtb2R1bGUgYXBwLXJvdXRlc1xuICogQHNlZSBtb2R1bGU6dGltZXN0YW1wXG4gKiBAc2VlIG1vZHVsZTpoZWFkZXItcGFyc2VyXG4gKiBAc2VlIG1vZHVsZTpmaWxlLWFuYWx5emVyXG4gKiBAc2VlIG1vZHVsZTp1cmwtc2hvcnRlbmVyXG4gKiBAc2VlIG1vZHVsZTppbWFnZS1hYnN0cmFjdFxuICogQHBhcmFtIHtvYmplY3R9IGFjdGl2ZUFwcCAtIEV4cHJlc3NKUyBvYmplY3QgaW5zdGFuY2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBleHByZXNzTW9kdWxlIC0gRXhwcmVzc0pTIG1vZHVsZVxuICogQHBhcmFtIHtvYmplY3R9IG1vbmdvRGF0YWJhc2UgLSBNb25nb0RCIGRhdGFiYXNlXG4gKi9cbmNvbnN0IHNldHVwUm91dGVzID0gKGFjdGl2ZUFwcCwgZXhwcmVzc01vZHVsZSwgbW9uZ29EYXRhYmFzZSkgPT4ge1xuICBjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG4gIC8vIFByb2R1dGlvbiBhbmQgZGV2ZWxvcG1lbnQgc3BlY2lmaWMgc2V0dGluZ3NcbiAgY29uc3QgYXBwRW52ID0gYWN0aXZlQXBwLmdldCgnZW52Jyk7XG4gIGNvbnN0IGN1ckRpciA9IHByb2Nlc3MuY3dkKCk7XG4gIGxldCB0Z3RQYXRoID0gbnVsbDtcblxuICBpZiAoYXBwRW52ID09PSAncHJvZHVjdGlvbicpIHtcbiAgICB0Z3RQYXRoID0gY3VyRGlyICsgJy9kaXN0JztcbiAgICBhY3RpdmVBcHAuc2V0KCd2aWV3cycsICcuL2Rpc3Qvdmlld3MnKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0Z3RQYXRoID0gY3VyRGlyICsgJy9zcmMnO1xuICAgIGFjdGl2ZUFwcC5zZXQoJ3ZpZXdzJywgJy4vc3JjL3ZpZXdzJyk7XG4gIH1cbiAgXG4gIGFjdGl2ZUFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ3B1ZycpO1xuICBhY3RpdmVBcHAudXNlKGV4cHJlc3NNb2R1bGUuc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICd2aWV3cycpKSk7XG4gIGFjdGl2ZUFwcC51c2UoJy9zdGF0aWMnLCBleHByZXNzTW9kdWxlLnN0YXRpYyhwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAndmlld3Mvc3RhdGljX2ZpbGVzJykpKTtcblxuICBjb25zdCByVGltZXN0YW1wID0gZXhwcmVzc01vZHVsZS5Sb3V0ZXIoKTtcbiAgY29uc3QgY2JUaW1lc3RhbXAgPSByZXF1aXJlKHRndFBhdGggKyAnL2NvbnRyb2xsZXJzL3RpbWVzdGFtcCcpO1xuICByVGltZXN0YW1wLmdldCgnL3RpbWVzdGFtcC9hcGkvdjEvOmRhdGEnLCBjYlRpbWVzdGFtcCk7XG5cbiAgY29uc3QgckhlYWRlclBhcnNlciA9IGV4cHJlc3NNb2R1bGUuUm91dGVyKCk7XG4gIGNvbnN0IGNiSGVhZGVyUGFyc2VyID0gcmVxdWlyZSh0Z3RQYXRoICsgJy9jb250cm9sbGVycy9oZWFkZXItcGFyc2VyJyk7XG4gIHJIZWFkZXJQYXJzZXIuZ2V0KCcvaGVhZGVyLXBhcnNlci9hcGkvdjEvd2hvYW1pJywgY2JIZWFkZXJQYXJzZXIpO1xuXG4gIGNvbnN0IHJGaWxlQW5hbHl6ZXIgPSBleHByZXNzTW9kdWxlLlJvdXRlcigpO1xuICBjb25zdCBjYkZpbGVBbmFseXplciA9IHJlcXVpcmUodGd0UGF0aCArICcvY29udHJvbGxlcnMvZmlsZS1hbmFseXplcicpO1xuICByRmlsZUFuYWx5emVyLnBvc3QoJy9maWxlLWFuYWx5emVyL2FwaS92MS9maW5kc2l6ZScsIGNiRmlsZUFuYWx5emVyLnBvc3REYXRhKTtcbiAgXG4gIGNvbnN0IHJVcmxTaG9ydGVuZXIgPSBleHByZXNzTW9kdWxlLlJvdXRlcigpO1xuICBjb25zdCBjYlVybFNob3J0ZW5lciA9IHJlcXVpcmUodGd0UGF0aCArICcvY29udHJvbGxlcnMvdXJsLXNob3J0ZW5lcicpO1xuICBjYlVybFNob3J0ZW5lci5yZWFkQ29sbGVjdGlvbihtb25nb0RhdGFiYXNlKTtcbiAgclVybFNob3J0ZW5lci5nZXQoJy91cmwtc2hvcnRlbmVyL2FwaS92MS9uZXcvKicsIGNiVXJsU2hvcnRlbmVyLnByb2Nlc3NVcmwpO1xuICByVXJsU2hvcnRlbmVyLmdldCgnL3VybC1zaG9ydGVuZXIvOmRhdGEnLCBjYlVybFNob3J0ZW5lci5hY2Nlc3NMaW5rKTtcblxuICBjb25zdCBySW1hZ2VBYnN0cmFjdCA9IGV4cHJlc3NNb2R1bGUuUm91dGVyKCk7XG4gIGNvbnN0IGNiSW1hZ2VBYnN0cmFjdCA9IHJlcXVpcmUodGd0UGF0aCArICcvY29udHJvbGxlcnMvaW1hZ2UtYWJzdHJhY3QnKTtcbiAgY2JJbWFnZUFic3RyYWN0LnJlYWRDb2xsZWN0aW9uKG1vbmdvRGF0YWJhc2UpO1xuICBySW1hZ2VBYnN0cmFjdC5nZXQoJy9pbWFnZS1hYnN0cmFjdC9hcGkvdjEvZW50cnkvKicsIGNiSW1hZ2VBYnN0cmFjdC5nZXRTZWFyY2hSZXN1bHRzKTtcbiAgckltYWdlQWJzdHJhY3QuZ2V0KCcvaW1hZ2UtYWJzdHJhY3QvYXBpL3YxL2hpc3RvcnknLCBjYkltYWdlQWJzdHJhY3QuZ2V0UmVjZW50SGlzdG9yeSk7XG5cbiAgYWN0aXZlQXBwLnVzZShyVGltZXN0YW1wLCBySGVhZGVyUGFyc2VyLCByRmlsZUFuYWx5emVyLCByVXJsU2hvcnRlbmVyLCBySW1hZ2VBYnN0cmFjdCk7XG4gIFxuICBhY3RpdmVBcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgcmVzLnJlbmRlcignaW5kZXgucHVnJywgeyBjb250ZW50OiAnbGFuZGluZycsIGFwcEVudjogYXBwRW52IH0pO1xuICB9KTtcbiAgXG4gIGFjdGl2ZUFwcC5nZXQoJy90aW1lc3RhbXAvYXBpL3YxJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICByZXMucmVuZGVyKCdpbmRleC5wdWcnLCB7IGNvbnRlbnQ6ICd0aW1lc3RhbXAnLCBhcHBFbnY6IGFwcEVudiB9KTtcbiAgfSk7XG5cbiAgYWN0aXZlQXBwLmdldCgnL2hlYWRlci1wYXJzZXIvYXBpL3YxJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICByZXMucmVuZGVyKCdpbmRleC5wdWcnLCB7IGNvbnRlbnQ6ICdoZWFkZXItcGFyc2VyJywgYXBwRW52OiBhcHBFbnYgfSk7XG4gIH0pO1xuXG4gIGFjdGl2ZUFwcC5nZXQoJy9maWxlLWFuYWx5emVyJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICByZXMucmVuZGVyKCdpbmRleC5wdWcnLCB7IGNvbnRlbnQ6ICdmaWxlLWFuYWx5emVyJywgYXBwRW52OiBhcHBFbnYgfSk7XG4gIH0pO1xuXG4gIGFjdGl2ZUFwcC5nZXQoJy91cmwtc2hvcnRlbmVyL2FwaS92MScsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gICAgcmVzLnJlbmRlcignaW5kZXgucHVnJywgeyBjb250ZW50OiAndXJsLXNob3J0ZW5lcicsIGFwcEVudjogYXBwRW52IH0pO1xuICB9KTtcblxuICBhY3RpdmVBcHAuZ2V0KCcvaW1hZ2UtYWJzdHJhY3QvYXBpL3YxJywgZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgICByZXMucmVuZGVyKCdpbmRleC5wdWcnLCB7IGNvbnRlbnQ6ICdpbWFnZS1hYnN0cmFjdCcsIGFwcEVudjogYXBwRW52IH0pO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMuc2V0dXAgPSBzZXR1cFJvdXRlczsiXX0=