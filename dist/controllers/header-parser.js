"use strict";

/** @module header-parser */

/**
 * Request header parser application URL handler
 * @function parseRequest
 * @param {object} req - Request from the client
 * @param {object} res - Response from the server
 */
var parseRequest = function parseRequest(req, res, next) {
  var ipAddr = req.ip || req.connection.remoteAddress || null;
  var lang = req.get('Accept-Language') || null;
  var usrAgent = req.get('User-Agent') || null;
  var dataObj = {
    ip: ipAddr,
    lang: lang,
    agent: usrAgent
  };

  try {
    res.set('Content-Type', 'application/json; charset=utf-8');
    res.status(200).json(dataObj);
  } catch (err) {
    console.error(new Error(err));
    next(err);
  }
};

module.exports = parseRequest;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb250cm9sbGVycy9oZWFkZXItcGFyc2VyLmpzIl0sIm5hbWVzIjpbInBhcnNlUmVxdWVzdCIsInJlcSIsInJlcyIsIm5leHQiLCJpcEFkZHIiLCJpcCIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwibGFuZyIsImdldCIsInVzckFnZW50IiwiZGF0YU9iaiIsImFnZW50Iiwic2V0Iiwic3RhdHVzIiwianNvbiIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFNQSxZQUFZLEdBQUcsU0FBZkEsWUFBZSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBV0MsSUFBWCxFQUFvQjtBQUN2QyxNQUFNQyxNQUFNLEdBQUdILEdBQUcsQ0FBQ0ksRUFBSixJQUFVSixHQUFHLENBQUNLLFVBQUosQ0FBZUMsYUFBekIsSUFBMEMsSUFBekQ7QUFDQSxNQUFNQyxJQUFJLEdBQUdQLEdBQUcsQ0FBQ1EsR0FBSixDQUFRLGlCQUFSLEtBQThCLElBQTNDO0FBQ0EsTUFBTUMsUUFBUSxHQUFHVCxHQUFHLENBQUNRLEdBQUosQ0FBUSxZQUFSLEtBQXlCLElBQTFDO0FBRUEsTUFBTUUsT0FBTyxHQUFHO0FBQ2ROLElBQUFBLEVBQUUsRUFBRUQsTUFEVTtBQUVkSSxJQUFBQSxJQUFJLEVBQUVBLElBRlE7QUFHZEksSUFBQUEsS0FBSyxFQUFFRjtBQUhPLEdBQWhCOztBQU1BLE1BQUk7QUFDRlIsSUFBQUEsR0FBRyxDQUFDVyxHQUFKLENBQVEsY0FBUixFQUF3QixpQ0FBeEI7QUFDQVgsSUFBQUEsR0FBRyxDQUFDWSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJKLE9BQXJCO0FBQ0QsR0FIRCxDQUlBLE9BQU9LLEdBQVAsRUFBWTtBQUNWQyxJQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBYyxJQUFJQyxLQUFKLENBQVVILEdBQVYsQ0FBZDtBQUNBYixJQUFBQSxJQUFJLENBQUNhLEdBQUQsQ0FBSjtBQUNEO0FBQ0YsQ0FuQkQ7O0FBcUJBSSxNQUFNLENBQUNDLE9BQVAsR0FBaUJyQixZQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKiBAbW9kdWxlIGhlYWRlci1wYXJzZXIgKi9cblxuLyoqXG4gKiBSZXF1ZXN0IGhlYWRlciBwYXJzZXIgYXBwbGljYXRpb24gVVJMIGhhbmRsZXJcbiAqIEBmdW5jdGlvbiBwYXJzZVJlcXVlc3RcbiAqIEBwYXJhbSB7b2JqZWN0fSByZXEgLSBSZXF1ZXN0IGZyb20gdGhlIGNsaWVudFxuICogQHBhcmFtIHtvYmplY3R9IHJlcyAtIFJlc3BvbnNlIGZyb20gdGhlIHNlcnZlclxuICovXG5jb25zdCBwYXJzZVJlcXVlc3QgPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgaXBBZGRyID0gcmVxLmlwIHx8IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MgfHwgbnVsbDtcbiAgY29uc3QgbGFuZyA9IHJlcS5nZXQoJ0FjY2VwdC1MYW5ndWFnZScpIHx8IG51bGw7XG4gIGNvbnN0IHVzckFnZW50ID0gcmVxLmdldCgnVXNlci1BZ2VudCcpIHx8IG51bGw7XG5cbiAgY29uc3QgZGF0YU9iaiA9IHtcbiAgICBpcDogaXBBZGRyLFxuICAgIGxhbmc6IGxhbmcsXG4gICAgYWdlbnQ6IHVzckFnZW50XG4gIH07XG5cbiAgdHJ5IHtcbiAgICByZXMuc2V0KCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGFPYmopO1xuICB9XG4gIGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcihlcnIpKTtcbiAgICBuZXh0KGVycik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZVJlcXVlc3Q7XG4iXX0=